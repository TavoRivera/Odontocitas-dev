{% extends 'layout.html' %}

{% block content %}
<div class="form-container">
  <div class="form-header">
    <h2>Editar Perfil</h2>
    <p>Mantén tu información actualizada para que los pacientes puedan conocerte mejor.</p>
  </div>
  
  <form method="post" enctype="multipart/form-data" class="modern-form">
    {% csrf_token %}

    {% for field in form %}
      <div class="form-field">
        <label for="{{ field.id_for_label }}" class="form-label">{{ field.label }}</label>

        {% if field.name == 'foto_perfil' and form.instance.foto_perfil.url %}
          <div class="image-preview-container">
            <img src="{{ form.instance.foto_perfil.url }}" alt="Foto de perfil actual" class="image-preview">
            <div class="field-wrapper">{{ field }}</div>
          </div>
        {% elif field.name == 'carnet_de_estudiante' and form.instance.carnet_de_estudiante.url %}
          <div class="image-preview-container">
            <img src="{{ form.instance.carnet_de_estudiante.url }}" alt="Carnet de estudiante actual" class="image-preview">
            <div class="field-wrapper">{{ field }}</div>
          </div>
        {% else %}
          <div class="field-wrapper">{{ field }}</div>
        {% endif %}

        {% if field.help_text %}
          <small class="form-help-text">{{ field.help_text }}</small>
        {% endif %}
        {% for error in field.errors %}
          <div class="form-error">{{ error }}</div>
        {% endfor %}
      </div>
    {% endfor %}

    <button type="submit" class="btn btn-primary">Guardar Cambios</button>
  </form>
</div>
{% endblock %}
