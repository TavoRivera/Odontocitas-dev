{% extends 'layout.html' %}
{% load static %}

{% block title %}Editar Tratamiento - OdontoLink{% endblock %}

{% block content %}
<div class="form-container">
  <div class="form-header">
    <h2>Editar Tratamiento</h2>
    <p>Actualiza los detalles de tu tratamiento.</p>
  </div>

  <form method="post" enctype="multipart/form-data" class="modern-form">
    {% csrf_token %}

    <!-- Muestra la imagen actual si existe -->
    {% if form.instance.imagen and form.instance.imagen.url %}
      <div class="form-field">
        <label class="form-label">Imagen Actual</label>
        <div class="current-image-wrapper">
          <img src="{{ form.instance.imagen.url }}" alt="Imagen actual de {{ form.instance.titulo }}" class="current-image">
        </div>
      </div>
    {% endif %}

    <!-- Renderizado de los campos del formulario -->
    {% for field in form %}
      <div class="form-field">
          <label for="{{ field.id_for_label }}" class="form-label">
            {{ field.label }}
            {% if field.name == 'imagen' %}
              (Opcional: subir para reemplazar)
            {% endif %}
          </label>
        <div class="field-wrapper">
          {{ field }}
        </div>
        {% if field.help_text %}
          <small class="form-help-text">{{ field.help_text }}</small>
        {% endif %}
        {% for error in field.errors %}
          <div class="form-error">{{ error }}</div>
        {% endfor %}
      </div>
    {% endfor %}

    <hr>

    <div class="form-actions">
        <button type="submit" class="btn btn-primary">Guardar Cambios</button>
        <a href="{% url 'mis_ofertas' %}" class="btn btn-secondary">Cancelar</a>
    </div>
  </form>
</div>

<style>
.current-image-wrapper {
  margin-bottom: 1rem;
}
.current-image {
  max-width: 200px;
  height: auto;
  border-radius: 8px;
  border: 1px solid #ddd;
}
.form-actions {
  display: flex;
  justify-content: flex-end;
  gap: 1rem;
  margin-top: 2rem;
}
</style>
{% endblock %}
