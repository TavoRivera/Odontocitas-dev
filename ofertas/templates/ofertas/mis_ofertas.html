{% extends 'layout.html' %}
{% load static %}

{% block title %}Mis Tratamientos - OdontoLink{% endblock %}

{% block content %}
<div class="container my-5">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1>Mis Publicaciones de Tratamientos</h1>
        <a href="{% url 'crear_oferta' %}" class="btn btn-primary btn-lg">Crear Nuevo Tratamiento</a>
    </div>

    <p class="lead mb-4">
        Aquí puedes administrar todos los tratamientos que has publicado. Puedes editarlos, eliminarlos o ver su estado.
    </p>

    <hr>

    {% if ofertas %}
        <div class="ofertas-grid">
            {% for oferta in ofertas %}
                <div class="oferta-item-con-acciones">
                    {# Incluimos la card reutilizable #}
                    {% include 'ofertas/partials/oferta_card.html' with oferta=oferta %}
                    
                    {# Acciones específicas para 'mis_tratamientos' #}
                    <div class="oferta-card-acciones">
                        <a href="{% url 'editar_oferta' pk=oferta.pk %}" class="btn btn-secondary btn-sm">Editar</a>
                        <a href="{% url 'eliminar_oferta' pk=oferta.pk %}" class="btn btn-danger btn-sm">Eliminar</a>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <div class="alert alert-info mt-4">
            <h4 class="alert-heading">¡Aún no has publicado nada!</h4>
            <p>Parece que todavía no has creado ningún tratamiento. ¡Anímate a publicar tu primer tratamiento para que otros puedan encontrarlo!</p>
            <hr>
            <p class="mb-0">Haz clic en el botón "Crear Nuevo Tratamiento" para empezar.</p>
        </div>
    {% endif %}
</div>

{# Estilos adicionales para los botones de acción #}
<style>
.oferta-item-con-acciones {
    display: flex;
    flex-direction: column;
}
.oferta-card-acciones {
    display: flex;
    justify-content: flex-end;
    gap: 8px;
    padding: 12px;
    background-color: #f8f9fa;
    border: 1px solid #e0e0e0;
    border-top: none;
    border-radius: 0 0 12px 12px;
    margin-top: -1px; /* Para que se junte con la card */
}
</style>
{% endblock %}
